{"ast":null,"code":"var _jsxFileName = \"/home/eric/sd-07-project-recipes-app/src/components/RecipeProgress/RecipeProgress.jsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport '../RecipeDetails/style.css';\nimport Context from '../../Context';\nimport Meals from '../../services/meals-api';\nimport Drinks from '../../services/cocktails-api';\nimport RecipeToProgress from './RecipeToProgress';\n\nconst filterFoodKeys = food => {\n  const objKeys = Object.keys(food);\n  const filteredIngredientKeys = objKeys.filter(key => key.includes('strIngredient'));\n  const filteredMeasureKeys = objKeys.filter(key => key.includes('strMeasure'));\n  const ingredientsObj = filteredIngredientKeys.map(key => food[key]);\n  const measuresObj = filteredMeasureKeys.map(key => food[key]);\n  const ingredientsObjFiltered = ingredientsObj.filter(ing => ing);\n  const measuresObjFiltered = measuresObj.filter(ing => ing);\n  return [ingredientsObjFiltered, measuresObjFiltered];\n};\n\nconst RecipeProgress = ({\n  page\n}) => {\n  const {\n    id\n  } = useParams();\n  const {\n    verifyInProgress,\n    checkFavorite\n  } = useContext(Context);\n  const [meal, setMeal] = useState({});\n  const [drink, setDrink] = useState({});\n  const [meals, setMeals] = useState([]);\n  const [drinks, setDrinks] = useState([]);\n  const [ingredients, setIngredients] = useState([]);\n  const [measures, setMeasures] = useState([]);\n  const [isFetching, setIsFetching] = useState(true);\n  const [inProgress, setInProgress] = useState(false);\n  const [favorite, setFavorite] = useState(false);\n  useEffect(() => {\n    const isInProgress = verifyInProgress(id, page);\n\n    if (isInProgress) {\n      setInProgress(true);\n    }\n  }, [verifyInProgress, id, page]);\n  useEffect(() => {\n    const isFavorite = checkFavorite(id);\n\n    if (isFavorite) {\n      setFavorite(true);\n    } else {\n      setFavorite(false);\n    }\n  }, [id, checkFavorite]);\n  useEffect(() => {\n    const limitToShow = 6;\n\n    if (page === 'meal') {\n      Meals.getMealDetailsById(id).then(res => {\n        const [filteredIngredients, filteredMeasures] = filterFoodKeys(res);\n        setIngredients(filteredIngredients);\n        setMeasures(filteredMeasures);\n        setMeal(res);\n        setIsFetching(false);\n      }).catch(err => console.log(err));\n      Drinks.getCocktails(limitToShow).then(res => setDrinks(res)).catch(err => console.log(err));\n    }\n\n    if (page === 'drink') {\n      Drinks.getCocktailDetailsById(id).then(res => {\n        const [filteredIngredients, filteredMeasures] = filterFoodKeys(res);\n        setIngredients(filteredIngredients);\n        setMeasures(filteredMeasures);\n        setDrink(res);\n        setIsFetching(false);\n      }).catch(err => console.log(err));\n      Meals.getMeals(limitToShow).then(res => setMeals(res)).catch(err => console.log(err));\n    }\n  }, [page, id]);\n\n  if (isFetching) {\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 12\n      }\n    }, \"Loading details...\");\n  }\n\n  const commonProps = {\n    page,\n    favorite,\n    ingredients,\n    meals,\n    drinks,\n    measures,\n    inProgress,\n    id\n  };\n  return /*#__PURE__*/React.createElement(Recipe, {\n    id: id,\n    area: area,\n    image: image,\n    name: name,\n    category: category,\n    instructions: instructions,\n    youtube: youtube,\n    alcoholic: alcoholic,\n    meal: isMeal,\n    commonProps: commonProps,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  });\n};\n\nRecipeProgress.propTypes = {\n  page: PropTypes.string.isRequired\n};\nexport default RecipeProgress;","map":{"version":3,"sources":["/home/eric/sd-07-project-recipes-app/src/components/RecipeProgress/RecipeProgress.jsx"],"names":["React","useContext","useEffect","useState","useParams","PropTypes","Context","Meals","Drinks","RecipeToProgress","filterFoodKeys","food","objKeys","Object","keys","filteredIngredientKeys","filter","key","includes","filteredMeasureKeys","ingredientsObj","map","measuresObj","ingredientsObjFiltered","ing","measuresObjFiltered","RecipeProgress","page","id","verifyInProgress","checkFavorite","meal","setMeal","drink","setDrink","meals","setMeals","drinks","setDrinks","ingredients","setIngredients","measures","setMeasures","isFetching","setIsFetching","inProgress","setInProgress","favorite","setFavorite","isInProgress","isFavorite","limitToShow","getMealDetailsById","then","res","filteredIngredients","filteredMeasures","catch","err","console","log","getCocktails","getCocktailDetailsById","getMeals","commonProps","area","image","name","category","instructions","youtube","alcoholic","isMeal","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport '../RecipeDetails/style.css';\n\nimport Context from '../../Context';\nimport Meals from '../../services/meals-api';\nimport Drinks from '../../services/cocktails-api';\nimport RecipeToProgress from './RecipeToProgress';\n\nconst filterFoodKeys = (food) => {\n  const objKeys = Object.keys(food);\n\n  const filteredIngredientKeys = objKeys.filter((key) => key.includes('strIngredient'));\n  const filteredMeasureKeys = objKeys.filter((key) => key.includes('strMeasure'));\n\n  const ingredientsObj = filteredIngredientKeys.map((key) => food[key]);\n  const measuresObj = filteredMeasureKeys.map((key) => food[key]);\n\n  const ingredientsObjFiltered = ingredientsObj.filter((ing) => ing);\n  const measuresObjFiltered = measuresObj.filter((ing) => ing);\n\n  return [ingredientsObjFiltered, measuresObjFiltered];\n};\n\nconst RecipeProgress = ({ page }) => {\n  const { id } = useParams();\n  const { verifyInProgress, checkFavorite } = useContext(Context);\n\n  const [meal, setMeal] = useState({});\n  const [drink, setDrink] = useState({});\n  const [meals, setMeals] = useState([]);\n  const [drinks, setDrinks] = useState([]);\n  const [ingredients, setIngredients] = useState([]);\n  const [measures, setMeasures] = useState([]);\n\n  const [isFetching, setIsFetching] = useState(true);\n  const [inProgress, setInProgress] = useState(false);\n  const [favorite, setFavorite] = useState(false);\n\n  useEffect(() => {\n    const isInProgress = verifyInProgress(id, page);\n    if (isInProgress) {\n      setInProgress(true);\n    }\n  }, [verifyInProgress, id, page]);\n\n  useEffect(() => {\n    const isFavorite = checkFavorite(id);\n    if (isFavorite) {\n      setFavorite(true);\n    } else {\n      setFavorite(false);\n    }\n  }, [id, checkFavorite]);\n\n  useEffect(() => {\n    const limitToShow = 6;\n\n    if (page === 'meal') {\n      Meals.getMealDetailsById(id)\n        .then((res) => {\n          const [filteredIngredients, filteredMeasures] = filterFoodKeys(res);\n          setIngredients(filteredIngredients);\n          setMeasures(filteredMeasures);\n          setMeal(res);\n          setIsFetching(false);\n        })\n        .catch((err) => console.log(err));\n\n      Drinks.getCocktails(limitToShow)\n        .then((res) => setDrinks(res))\n        .catch((err) => console.log(err));\n    }\n\n    if (page === 'drink') {\n      Drinks.getCocktailDetailsById(id)\n        .then((res) => {\n          const [filteredIngredients, filteredMeasures] = filterFoodKeys(res);\n          setIngredients(filteredIngredients);\n          setMeasures(filteredMeasures);\n          setDrink(res);\n          setIsFetching(false);\n        })\n        .catch((err) => console.log(err));\n\n      Meals.getMeals(limitToShow)\n        .then((res) => setMeals(res))\n        .catch((err) => console.log(err));\n    }\n  }, [page, id]);\n\n  if (isFetching) {\n    return <h1>Loading details...</h1>;\n  }\n\n  const commonProps = {\n    page,\n    favorite,\n    ingredients,\n    meals,\n    drinks,\n    measures,\n    inProgress,\n    id,\n  };\n\n  return (\n    <Recipe\n      id={ id }\n      area={ area }\n      image={ image }\n      name={ name }\n      category={ category }\n      instructions={ instructions }\n      youtube={ youtube }\n      alcoholic={ alcoholic }\n      meal={ isMeal }\n      commonProps={ commonProps }\n    />\n  );\n};\n\nRecipeProgress.propTypes = { page: PropTypes.string.isRequired };\n\nexport default RecipeProgress;\n"]},"metadata":{},"sourceType":"module"}